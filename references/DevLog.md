# 开发日志记录

## 一、项目构建
- MinecraftForge官网中下载对应Minecraft版本的Forge的MDK文件，将下载好的zip格式文件解压内容至项目目录下
- 命令行执行gradlew genEclipseRuns，显示"BUILD SUCCESS"则成功；显示失败则需要重试，考虑网络问题导致失败
- 修改.gitignore，忽略规则中，下文会覆盖上文声明的忽略规则

## 二、文件结构组织
- common: 存储通用的方法和类(与Config有关)
  - core: 存储模组的核心方法和类(与Config无关)
- command: 存储指令
  - argument: 存储指令相关的参数判断
    - MRArgSeason: 季节相关
  - MRCmdTime: mrtime <set|info> [<season|month|solarterm>] [<"spring"|"jan"|"spring_begin">]
  - MRCmdHandler: 指令注册

## 三、核心功能
- 时间(time):
  - 季节(MRSeason):Enum=>四季，简单的枚举
  - 月份(MRMonth):Enum=>月份，简单的枚举
  - 节气(MRSolarTerm):Enum=>节气，简单的枚举
  - 时点(MRTimeDot):Class=>记录当前时间点
    - 记录当前的时间点，并在每次访问时更新，若时差产生时点变化，则执行相应属性的更新
    - 不设置线程安全，短时间产生的变化不大
- 灵气
	- 描述:一些特殊的植物在生长时会在周围[3*3]内产生的特殊物质。
	- 功能:可为一些特殊的器具提供能源。一些植物的基础生长要素，缺少该要素时植物会停止生长。
	- 属性:
		- 一级:灵空
		- 二级:灵金、灵木、灵火、灵水、灵土
		- 三级:待定
	- 浓度:
		- 飘渺，稀薄，充盈，浓郁
	- 特性:
		- 存在零级，但未被使用，灵虚
		- 浓度提升:同类型同浓度的灵气在一定范围[3*3]超过3份，浓度提升一个档次[只在判定时有效]
		- 相生提升:二级灵气中，若高浓度灵气范围内存在相生的低浓度灵气，该低浓度灵气提升一个档次[只在判定时有效]
		- 相克消减:二级灵气中，若高浓度灵气范围内存在相克的低浓度灵气，该低浓度灵气再降一个档次[只在判定时有效]
- 花盆:
    - 描述:此处指种产生灵气的花盆
    - 特性:
        - 根据相生相克原则: 花盆亦存在属性[属性盆]。属性相符时植物产生灵气浓度不变。属性相生时植物产生的灵气浓度提升。属性相克时产生的浓度消减，当消减为飘渺时植物会枯萎。
        - 只能种在特定的土壤，土壤不符无法存活
        - 符合[3*3]范围内的灵气条件时产生特性
    - 类型:
        - 木盆:
            - 适用:泥土
            - 数量:1
            - 特性:浓郁灵气时产生飘渺-灵木
- 盆栽:
	- 描述:此处指能产生灵气的植物
	- 植物:
        - 雪绒菊:
        	- 描述:生产基础灵气
        	- 需求:无
        	- 产生:稀薄-灵空
        - 青萝藤:
        	- 描述:生产基础木级灵气
        	- 需求:浓郁-灵空，稀薄-灵水
        	- 产生:稀薄-灵木，飘渺-灵空
      	- 烛心草:
        	- 需求:浓郁-灵空，稀薄-灵木
        	- 产生:稀薄-灵火，飘渺-灵空
      	- 落红梅:
        	- 需求:浓郁-灵空，稀薄-灵火
        	- 产生:稀薄-灵土，飘渺-灵空
      	- 子风藤:
        	- 需求:浓郁-灵空，飘渺-灵土
        	- 产生:稀薄-灵金，飘渺-灵空
      	- 水仙花:
        	- 需求:浓郁-灵空，飘渺-灵金
        	- 产生:稀薄-灵水，飘渺-灵空


## 四、功能实现
- 命令(Command):
    - 注册命令: 参考mcforge doc事件相关
    - 命令功能实现: 参考net.minecraft.command.impl.TimeCommand
      - 获取命令参数: 参考net.minecraft.command.arguments.TimeArgument
      - 命令推荐输入: 参考net.minecraft.command.arguments.TimeArgument::listSuggestions

## 五、Q&A:
- 主要功能：
		- 通过种植产生灵气的植物，运用灵气完成各式各样的功能。同时灵气植物的产物也能有一定的功能。
- 问题:
    - 1.部份植物的生长与季节挂钩，生长时间过长
      	- 应与季节脱钩，将植物的生长挂钩于光照，水份，肥料，土壤，温度等五个条件，且与五灵气一一对应
      	- 生长时间过长时，当生长条件基本满足时，健康值增加，健康值累计值达一定程度便会触发生长加速，产物翻倍等
    - 2.灵气与植物的基本生长需求如何对应
      	- 水份对应灵水，土壤对应灵土，肥料对应灵木，光照对应灵火，温度对应灵金(不全一一对应，主要体现在灵纹)
      	- 当植物产生稀薄及以上浓度的灵气时，通过对花盆刻印对应灵纹，实现使灵气浓度降级并产生对应效果
    - 3.健康值的具体情况
      	- 首次种植时健康值为100，当满足生长需求后健康值会累计增加，上限为200
      	- 当不满足生长需求时健康值会逐渐减少，且减少的幅度比增长的稍大
      	- 当健康值归0时，触发植物的死亡
      	- 100-149为正常生长，生长速度不变，掉落物不变
      	- 150-199为加速生长，生长速度1.5，掉落物50%概率翻倍
      	- 200为极速生长，生长速度2.0，掉落物稳定双倍
    - 4.灵纹如何刻画
      	- 1、需要雕刻台，对应灵纹所需的灵气在一定范围内(半径五格)内满足
      	- 2、在雕刻台放置所需的器具(雕刻刀和灵粉)和材料
      	- 3、雕刻对应的灵纹即可
    - 5.植物如何获得:
      	- 雪绒花:破坏草方块且上方有花朵的时候概率获得空灵根，种在盆栽长出，后续可通过剪枝来移植
      	- 五灵花:通过在赋灵阵上放置合适的物品并完成赋灵阵来获得，后续可通过剪枝来移植
    - 6.赋灵阵如何搭建:
      	- 初阶赋灵阵:
          	- 阵眼：放置对应物聚灵，不消耗(初级不需要放置)。天，地，雷，风，水，火，山，泽
          	- 合成:
              	- 青萝藤: 树枝，树叶，草，花+藤蔓
              	- 落红梅: 红花，红石，浆果，粘土+树苗
              	- 烛心草: 岩浆球，烈焰棒，地狱疣，洋甘菊+甘蔗
              	- 子风藤: 枯木，仙人掌，蒲公英，草+藤蔓
              	- 水仙花: 海草，莲叶，甘蔗，海带+土豆

## 功能实现记录
- 修改:
    - [已完成]删去节气对盆栽生长的影响
    - [已完成]对盆栽植物增加调试状态的功能
    - [已完成]重绘植物贴图中不和谐的地方
    - [已完成]完成剩余植物的贴图和模型等一系列数据
        - [已完成]剩余植物json数据的编写
    - [已完成]完成植物的生长要素判定
        - [已完成]光照的判定
        - [已完成]水份的判定
        - [已完成]温度的判定
            - [已完成]节气对温度的影响
        - [已完成]肥料的判定
            - [已完成]肥料槽设置及对应肥料转换
    - [已完成]完成植物的健康值机制
        - [已完成]对植物生长的判定提高
        - [已完成]健康值的增加/减少
    - [已完成]完成植物的灵气机制
        - [已完成]植物自身产生的灵气
        - [已完成]盆栽辅助产生的灵气
        - [已完成]灵气聚合时生长判定
            - [已完成]同种灵气浓度进阶判定
            - [已完成]灵气相生浓度提升判定
            - [已完成]灵握相克浓度降低判定
    - [已完成]盆栽的产物收获机制